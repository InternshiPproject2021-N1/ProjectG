@model IEnumerable<CODEFIRST_ASP.NET.Models.Employee>

@{
    ViewBag.Title = "Index";
}
<link href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<h2>Employees</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table class="table" id="empTable">
    <thead>
        <tr>
            <th>@Html.DisplayNameFor(m => m.Name)</th>
            <th>@Html.DisplayNameFor(m => m.Address)</th>
            <th>@Html.DisplayNameFor(m => m.Email)</th>
            <th>@Html.DisplayNameFor(m => m.Age)</th>
            <th>@Html.DisplayNameFor(m => m.Rank)</th>
            <th>@Html.DisplayNameFor(m => m.Description)</th>
            <th>@Html.DisplayNameFor(m => m.Create)</th>
            <th>@Html.DisplayNameFor(m => m.CreatedBy)</th>
            <th></th>
        </tr>
    </thead>
    <tbody class="tbody"></tbody>
</table>

<script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap.min.js"></script>
<script>
    var dataTable;

    $(document).ready(function () {
        dataTable = $("#empTable").dataTable({
            "ajax": {
                "url": "/Employee/List",
                "type": "GET",
                "datatype": "json"
            },
            "columns": [
                { "data": "Name" },
                { "data": "Address" },
                { "data": "Email" },
                { "data": "Age" },
                { "data": "Rank" },
                { "data": "Description" },
                {
                    "data": "Create",
                    'render': function (jsonDate) {
                        var date = new Date(parseInt(jsonDate.substr(6)));
                        var month = ("0" + (date.getMonth() + 1)).slice(-2);
                        return ("0" + date.getDate()).slice(-2) + '-' + month + '-' + date.getFullYear();
                    }
                },
                { "data": "CreatedBy" },
                {
                    "data": "EmpID",
                    "render": function (data) {
                        return "<a class='btn btn-default btn-sm' href='@Url.Action("Edit", "Employee")/" + data + "')><i class='fa fa-pencil'> </i>Edit</a> <a class='btn btn-danger btn-sm' style='margin-left:5px'href='@Url.Action("Delete", "Employee")/" + data + "'><i class='fa fa-trash'> </i>Delete</a>";
                    },
                    "width": "150px"
                },
            ],
        });
    });

</script>
